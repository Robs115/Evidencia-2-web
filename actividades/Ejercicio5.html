<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabla de Registros </title>
</head>
<body>
    <main class="container border p-4 my-5 rounded">
        <h1>Simulación de Tabla de Empleados</h1>
        <form action="" autocomplete="off" onsubmit="return false;">
            <section class="row">
                <div class="col-4">
                    <label for="txtRegistros">Número de registros:</label>
                    <input id="txtRegistros" type="number" name="txtRegistros" placeholder="Ej: 5" class="form-control">
                </div>

                <div class="col-4 mt-3">
                    <button class="btn btn-success" type="button" onclick="generarTabla()">GENERAR TABLA</button>
                    <input type="reset" class="btn btn-danger" value="LIMPIAR" onclick="limpiarTabla()">
                </div>
            </section>

            <section class="mt-4" id="tablaRegistros"></section>

            <script type="text/javascript">
                function generarTabla() {
                    let numRegistros = parseInt(document.getElementById("txtRegistros").value);

                    if (isNaN(numRegistros) || numRegistros <= 0) {
                        alert("Por favor, ingrese un número positivo mayor que 0.");
                        return;
                    }


                    let nombres = [];
                    for (let i = 1; i <= numRegistros; i++) {
                        let nombre = prompt("Ingrese el nombre del empleado #" + i + ":");
                        if (!nombre || nombre.trim() === "") {
                            alert("Nombre inválido. Intente de nuevo.");
                            i--; 
                        } else {
                            nombres.push(nombre.trim());
                        }
                    }

                    let tabla = document.createElement("table");
                    tabla.border = "1";
                    tabla.cellPadding = "8";
                    tabla.cellSpacing = "0";
                    tabla.style.borderCollapse = "collapse";

                    let thead = document.createElement("thead");
                    thead.innerHTML = "<tr><th>Id</th><th>Nombre</th><th>Acciones</th></tr>";
                    tabla.appendChild(thead);

                    let tbody = document.createElement("tbody");

                    nombres.forEach((nombre, index) => {
                        let fila = document.createElement("tr");

                        let tdId = document.createElement("td");
                        tdId.textContent = index + 1;
                        fila.appendChild(tdId);

                        let tdNombre = document.createElement("td");
                        tdNombre.textContent = nombre;
                        fila.appendChild(tdNombre);

                        let tdAcciones = document.createElement("td");

                        let btnEditar = document.createElement("button");
                        btnEditar.type = "button";
                        btnEditar.textContent = "Editar";
                        btnEditar.className = "btn btn-warning";
                        btnEditar.onclick = function() {
                            editarRegistro(this);
                        };

                        let btnEliminar = document.createElement("button");
                        btnEliminar.type = "button";
                        btnEliminar.textContent = "Eliminar";
                        btnEliminar.className = "btn btn-danger";
                        btnEliminar.style.marginLeft = "5px";
                        btnEliminar.onclick = function() {
                            eliminarRegistro(this);
                        };

                        tdAcciones.appendChild(btnEditar);
                        tdAcciones.appendChild(btnEliminar);
                        fila.appendChild(tdAcciones);

                        tbody.appendChild(fila);
                    });

                    tabla.appendChild(tbody);

                    let contenedor = document.getElementById("tablaRegistros");
                    contenedor.innerHTML = ""; 
                    contenedor.appendChild(tabla);
                }

                function editarRegistro(boton) {
                    let fila = boton.closest("tr");
                    let nombreActual = fila.cells[1].innerText;
                    let nuevoNombre = prompt("Editar nombre:", nombreActual);
                    if (nuevoNombre && nuevoNombre.trim() !== "") {
                        fila.cells[1].innerText = nuevoNombre.trim();
                    }
                }

                function eliminarRegistro(boton) {
                    let fila = boton.closest("tr");
                    fila.remove();
                    actualizarIds();
                }

                function limpiarTabla() {
                    document.getElementById("tablaRegistros").innerHTML = "";
                }

                function actualizarIds() {
                    const tabla = document.querySelector("#tablaRegistros table");
                    if (!tabla) return;
                    const filas = tabla.querySelectorAll("tbody tr");
                    filas.forEach((fila, i) => {
                        fila.cells[0].textContent = i + 1;
                    });
                }
            </script>
        </form>
    </main>
</body>
</html>

